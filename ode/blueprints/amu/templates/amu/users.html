{% extends "amu/base.html" %}
{% block titleinner %}{{_("User list")}}{% endblock %}

{% block inner %}
<h2>{{_("User list")}}</h2>

<div class="form-group">
  <label>{{_("Filter list")}}:</label>
  <input id='search_input' onkeyup='searchTable()' type="text" class="form-control" autofocus>
</div>

<table id="sort_table" class="table table-striped search_table">
  <thead>
    <tr class="no_filter" style="cursor: pointer;">
      <th onclick="sortTable(0, 'sort_table')">uid</th>
      <th onclick="sortTable(1, 'sort_table')">{{_("Name")}}</th>
      <th onclick="sortTable(2, 'sort_table')">{{_("E-Mail")}}</th>
      <th onclick="sortTable(3, 'sort_table')">{{_("Groups")}}</th>
    </tr>
  </thead>
  {% for user in users %}
  <tr data-href="{{url_for('.user',uid=user.userid)}}">
    <td><a href="{{url_for('.user',uid=user.userid)}}">{{user.userid}}</a></td>
    <td>{{user.name}}</td>
    <td>{{user.mail}}</td>
    <td>
      {% for group in groups %}
      {% if user.dn in group.members %}
      {{group.name}}
      {% endif %}
      {% endfor %}
    </td>
  </tr>
  {% endfor %}
</table>

{% endblock %}

{% block scripts %}
{{super()}}
<script src="{{url_for('.static', filename='amu/table_functions.js')}}"></script>
{% endblock %}